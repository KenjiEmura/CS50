{% extends "layout.html" %}

{% block title %}
    Register
{% endblock %}

{% block main %}
    <form action="/changepassword" method="post">
        <div class="form-group">
            <label class="mx-2">Current password:</label>
            <input autocomplete="off" id="currentpassword" autofocus class="form-control" name="currentpassword" placeholder="Current password" type="text">
        </div>
        <div class="form-group">
            <label class="mx-2">New password:</label>
            <input class="form-control"  id="newpassword" name="newpassword" placeholder="New Password" type="password">
        </div>
        <div class="form-group">
            <label class="mx-2">Confirm new password:</label>
            <input class="form-control"  id="confirmpassword" name="confirmpassword" placeholder="Confirm Password" type="password">
        </div>
        <button id="changepassword" class="btn btn-primary" type="submit" disabled>Cambiar contrase√±a</button>
    </form>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function(){

            var $currentpassword = $('#currentpassword');
            var $newpassword = $('#newpassword');
            var $confirmpassword = $('#confirmpassword');

            $(document).keyup(function() {

                console.log("The value of 'newpassword' is: " + $newpassword.val())

                if ($newpassword.val() != $confirmpassword.val() || !$currentpassword.val() || !$newpassword.val()){
                    $('#changepassword').attr('disabled', 'true')
                } else if ($newpassword.val() == $confirmpassword.val() && $currentpassword.val()){
                    $('#changepassword').removeAttr('disabled')
                }

            });
        });
    </script>
{% endblock %}
