{% extends "network/layout.html" %}
{% load static %}
{% load humanize %}


{% block body %}

    {% if messages %}
        {% for message in messages %}
        <div  {% if message.tags %} class=" {{ message.tags }} " {% endif %}> {{ message }} </div>
        {% endfor %}
    {% endif %}

    <div id='main-content'>
        {% csrf_token %}
        <input type="hidden" value="{{ profile_name }}" id="profile-name">
        <div id='pagination-info' style="height:0">
            <input id='page' type="hidden" value="{{ page.number }}">
            <input id='total_pages' type="hidden" value="{{ page.paginator.num_pages }}">
        </div>

        <div class="profile-info-container">
            <img width="50" height="50" src="https://icon-library.com/images/icon-logo-png/icon-logo-png-0.jpg" alt="" >
            <h1>{{ profile_name|title }}</h1>

            <div class="userdata">
                <div class="profile-info posts">
                    <h4 class="profile-num-data">{{ num_posts }}</h4>
                    <p>Posts</p>
                </div>
                <div class="profile-info following">
                    <h4 class="profile-num-data">{{ following }}</h4>
                    <p>Following</p>
                </div>
                <div class="profile-info followers">
                    <h4 class="profile-num-data">{{ followers }}</h4>
                    <p>Followers</p>
                </div>
            </div>

            {% if user.username != profile_name %}
            <div class="profile-buttons">
                {% if followed %}
                    <button class="btn btn-sm btn-outline-secondary" id="follow">Unfollow</button>
                {% else %}
                    <button class="btn btn-sm btn-primary" id="follow">Follow</button>
                {% endif %}
            </div>
            {% endif %}
        </div>

        {% if num_posts %}
        <div class="pagination-container top">
        </div>
        {% else %}
        <div class="alert alert-primary message" role="alert">
            There are no posts to show yet!
          </div>
        {% endif %}

        {% for post in page %}

        <div class='post-container'>
            <h3>{{ post.author|title }}</h3>
            <input type="hidden" value="{{ post.id }}">
            <a href="#">Edit</a>
            <p>{{ post.post }}</p>
            <p><span class="small-info">{{ post.timestamp }}</span></p>

            {% if request.user in post.likes.all %}
            <div class="unlike" style='display:inline'>
                <svg style="fill: red" width="20" height="20" viewBox="0 0 24 24"><path d="M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z"/></svg>
            </div>

            <div class="like" style='display:none'>
                <svg style="fill: red" width="20" height="20" viewBox="0 0 24 24"><path d="M12 21.593c-5.63-5.539-11-10.297-11-14.402 0-3.791 3.068-5.191 5.281-5.191 1.312 0 4.151.501 5.719 4.457 1.59-3.968 4.464-4.447 5.726-4.447 2.54 0 5.274 1.621 5.274 5.181 0 4.069-5.136 8.625-11 14.402m5.726-20.583c-2.203 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248-3.183 0-6.281 2.187-6.281 6.191 0 4.661 5.571 9.429 12 15.809 6.43-6.38 12-11.148 12-15.809 0-4.011-3.095-6.181-6.274-6.181"/></svg>
            </div>

            {% else %}
            <div class="unlike"  style='display:none'>
                <svg style="fill: red" width="20" height="20" viewBox="0 0 24 24"><path d="M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z"/></svg>
            </div>

            <div class="like" style='display:inline'>
                <svg style="fill: red" width="20" height="20" viewBox="0 0 24 24"><path d="M12 21.593c-5.63-5.539-11-10.297-11-14.402 0-3.791 3.068-5.191 5.281-5.191 1.312 0 4.151.501 5.719 4.457 1.59-3.968 4.464-4.447 5.726-4.447 2.54 0 5.274 1.621 5.274 5.181 0 4.069-5.136 8.625-11 14.402m5.726-20.583c-2.203 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248-3.183 0-6.281 2.187-6.281 6.191 0 4.661 5.571 9.429 12 15.809 6.43-6.38 12-11.148 12-15.809 0-4.011-3.095-6.181-6.274-6.181"/></svg>            </div>

            {% endif %}

            <p id='like-count'>{{ post.num_likes }}</p>
        </div>
        
        {% endfor %}

        {% if num_posts %}
        <div class="pagination-container bottom">
        </div>
        {% endif %}

    </div>

{% endblock %}


{% block script %}
    <script src="{% static 'network/profile.js' %}"></script>
{% endblock %}